import gsap from 'gsap'
import { ScrollTrigger } from 'gsap/all'
import { useEffect, useRef } from 'react'

gsap.registerPlugin(ScrollTrigger)

export default function MainBGDoodle4() {
  const drawRef = useRef<SVGPathElement>(null)

  useEffect(() => {
    const drawPath = drawRef.current
    if (!drawPath) return

    const length = drawPath.getTotalLength()

    gsap.set(drawPath, {
      strokeDasharray: length,
      strokeDashoffset: length,
    })

    gsap.to(drawPath, {
      strokeDashoffset: 0,
      scrollTrigger: {
        trigger: drawPath,
        start: 'top 80%',
        end: 'bottom-=800 top',
        scrub: 2,
      },
      ease: 'none',
    })
  }, [])
  return (
    <>
      <svg
        className="w-full"
        viewBox="0 0 1263 756"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          ref={drawRef}
          stroke="black"
          strokeWidth={15}
          stroke-linecap="round"
          d="M10.9951 45.2705C144.424 110.959 218 154.502 218 154.502C218 154.502 310.337 204.24 348.5 221.502C392.526 241.416 399 244.761 464.156 276.236C533.152 309.567 561.148 322.373 596.139 333.962C626.5 344.018 651.301 355.174 685 364.505C722.236 374.815 769 390.522 829 403.002C918.515 421.621 927.5 409.002 935 403.002C942.5 397.002 952 386.525 957.5 375.002C963 363.479 966.955 355.295 973 333.962C978.231 315.502 981.326 275.984 978.231 262.501C974.174 244.828 975.733 239.002 964 206.002C958.457 190.411 952.736 181.774 944 162.002C934.5 140.502 926.318 129.958 917.5 117.502C906.697 102.241 899.014 92.3063 885.5 84.0019C873.208 76.4488 853.584 63.0462 822 62.5019C805.443 62.2166 785.5 77.0019 781.5 90.5012C773.5 117.502 773.5 126.002 773.5 138.501C773.5 168.859 776.776 197.622 795.5 239.501C828.11 312.441 865.221 358.315 874.023 367.631C885.524 379.803 892.186 393.554 906.68 408.592C920.216 422.637 932.986 435.905 946.5 452C958.07 465.781 967.889 477.531 978.231 489.474C988.63 501.484 994.297 513.777 1014 519.5C1019.22 521.016 1035.6 518.5 1044 507.762C1090.23 448.623 1107.02 404.891 1120.5 367.631C1131.72 336.631 1133 322.5 1137.5 298.5C1141.29 278.292 1148.25 258.01 1156.03 196.117C1161.19 154.99 1167.02 105.172 1163.5 69.5007C1160 34.0007 1159.54 24.5471 1141.19 13.6861C1113 -3.0001 1082.29 48.5107 1077.5 57.3382C1069 73.0011 1064.37 80.4161 1056.06 101.69C1046.7 125.686 1043.59 144.736 1032.75 178.357C1025.67 200.331 1022.88 223.487 1016.14 244.761C1008.96 267.473 1007.33 286.749 1003.69 310.589C1001.48 325.075 997.996 341.676 994.357 364.505C991.405 383.028 990.718 405.933 988.137 433.894C982.407 495.961 990.718 508.633 996.395 531.929C1001.14 551.409 1014.48 577.991 1038.32 611.737C1053.45 633.154 1087.94 658.857 1114.54 678.669C1130.61 690.642 1160.43 706.227 1176 714.5C1205 730.051 1248.82 745.042 1248.82 745.042C1248.82 745.042 1255.03 749.178 1261.31 748.183"
        />
      </svg>
    </>
  )
}
